/*! Jets.js - v0.14.1 - 2018-06-22
* http://NeXTs.github.com/Jets.js/
* Copyright (c) 2015 Denis Lukov; Licensed MIT */
!function(t,e){"undefined"!=typeof module?module.exports=e():"function"==typeof define&&"object"==typeof define.amd?define(e):t.Jets=e()}(this,(function(){function t(e){if(!(this instanceof t))return new t(e);var n=this,o={searchSelector:"*AND",hideBy:"display:none",diacriticsMap:{}};if(n.options={},"columns addImportant searchSelector hideBy manualContentHandling callSearchManually searchInSpecificColumn diacriticsMap didSearch invert".split(" ").forEach((function(t){n.options[t]=e[t]||o[t]})),1<this.options.searchSelector.length){var r=n.options.searchSelector.trim();n.options.searchSelector=r.substr(0,1),n.options.searchSelectorMode=r.substr(1).toUpperCase()}if(n.content_tag=document.querySelectorAll(e.contentTag),!n.content_tag)throw Error("Error! Could not find contentTag element");if(n.content_param=e.contentTag,n.search_tag=document.querySelector(e.searchTag),!n.search_tag&&!n.options.callSearchManually)throw Error('Error! Provide one of search methods: searchTag or callSearchManually and call .search("phrase") manually');var a=n.search_tag&&n.search_tag.value||"";n.search=function(t,e){a!=(a=n.options.callSearchManually&&void 0!==t?t:n.search_tag?n.search_tag.value:"")&&(n._applyCSS(a,e),n.options.didSearch&&n.options.didSearch(a))},n._onSearch=function(t){if("keydown"==t.type)return setTimeout(n.search,0);n.search()},n.destroy=function(){n.options.callSearchManually||n._processEventListeners("remove"),n._destroy()},n.options.callSearchManually||n._processEventListeners("add"),n._addStyleTag(),n._setJets(),n._applyCSS(a)}return t.prototype={constructor:t,_processEventListeners:function(t){["input","keydown","change"].forEach(function(e){this.search_tag[t+"EventListener"](e,this._onSearch)}.bind(this))},_applyCSS:function(t,e){for(var n=this.options,o=this.replaceDiacritics(t.trim().toLowerCase().replace(/\s\s+/g," ")).replace(/\\/g,"\\\\"),r=n.searchSelectorMode?o.split(" ").filter((function(t,e,n){return n.indexOf(t)==e})):[o],a="AND"==n.searchSelectorMode,i=Array(r.length),c=0,s=r.length;c<s;c++)i[c]=(a?this.content_param+">":"")+(n.invert?"":":not(")+"[data-jets"+(void 0!==e?"-col-"+e:"")+n.searchSelector+'="'+r[c]+'"]'+(n.invert?"":")");r=n.hideBy.split(";").filter(Boolean).map((function(t){return t+(n.addImportant?"!important":"")})),a=(a?"":this.content_param+">")+i.join(a?",":"")+"{"+r.join(";")+"}",this.styleTag.innerHTML=o.length?a:""},_addStyleTag:function(){this.styleTag=document.createElement("style"),document.head.appendChild(this.styleTag)},_getText:function(t){return t&&(t.textContent||t.innerText)||""},_sanitize:function(t){return this.replaceDiacritics(t).trim().replace(/\s+/g," ").toLowerCase()},_getContentTags:function(t){return Array.prototype.slice.call(this.content_tag).reduce((function(e,n){return e.concat(Array.prototype.slice.call(n.querySelectorAll(t||":scope > *")))}),[])},_handleSpecificColumns:function(t,e){var n=this;n.options.searchInSpecificColumn&&Array.prototype.slice.call(t.children).map((function(o,r){n.options.columns&&n.options.columns.length&&-1==n.options.columns.indexOf(r)||t[(e||"remove")+"Attribute"]("data-jets-col-"+r,e&&n._sanitize(n._getText(o)))}))},_setJets:function(t,e){for(var n,o,r=this,a=r._getContentTags(e?"":t),i=0;o=a[i];i++)o.hasAttribute("data-jets")&&!e||(n=this.options.manualContentHandling?this.options.manualContentHandling(o):r.options.columns&&r.options.columns.length?r.options.columns.map((function(t){return r._getText(o.children[t])})).join(" "):r._getText(o),o.setAttribute("data-jets",r._sanitize(n)),r._handleSpecificColumns(o,"set"))},replaceDiacritics:function(t){var e,n=this.options.diacriticsMap;for(e in n)if(n.hasOwnProperty(e))for(var o=0,r=n[e].length;o<r;o++)t=t.replace(new RegExp(n[e][o],"g"),e);return t},update:function(t){this._setJets(":scope > :not([data-jets])",t)},_destroy:function(){this.styleTag.parentNode&&document.head.removeChild(this.styleTag);for(var t,e=this._getContentTags(),n=0;t=e[n];n++)t.removeAttribute("data-jets"),this._handleSpecificColumns(t)}},function(t,e){try{t.querySelector(":scope body")}catch(n){["querySelector","querySelectorAll"].forEach((function(n){var o=e[n];e[n]=function(e){if(/(^|,)\s*:scope/.test(e)){var r=this.getAttribute("id");return this.id="ID_"+Date.now(),e=e.replace(/((^|,)\s*):scope/g,"$1#"+this.getAttribute("id")),e=t[n](e),this.id=r,e}return o.call(this,e)}}))}}(window.document,Element.prototype),t}));